(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[847],{14194:(e,t,s)=>{Promise.resolve().then(s.bind(s,99046))},24944:(e,t,s)=>{"use strict";s.d(t,{k:()=>i});var l=s(95155),r=s(12115),a=s(55863),n=s(59434);let i=r.forwardRef((e,t)=>{let{className:s,value:r,...i}=e;return(0,l.jsx)(a.bL,{ref:t,className:(0,n.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",s),...i,children:(0,l.jsx)(a.C1,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(r||0),"%)")}})})});i.displayName=a.bL.displayName},30356:(e,t,s)=>{"use strict";s.d(t,{C:()=>o,z:()=>d});var l=s(95155),r=s(12115),a=s(75122),n=s(70154),i=s(59434);let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,l.jsx)(a.bL,{className:(0,i.cn)("grid gap-2",s),...r,ref:t})});d.displayName=a.bL.displayName;let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,l.jsx)(a.q7,{ref:t,className:(0,i.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),...r,children:(0,l.jsx)(a.C1,{className:"flex items-center justify-center",children:(0,l.jsx)(n.A,{className:"h-2.5 w-2.5 fill-current text-current"})})})});o.displayName=a.q7.displayName},47334:(e,t,s)=>{"use strict";s.d(t,{B:()=>u});var l=s(95155),r=s(59434),a=s(66695),n=s(12115),i=s(89051);let d=n.forwardRef((e,t)=>{let{className:s,children:a,...n}=e;return(0,l.jsxs)(i.bL,{ref:t,className:(0,r.cn)("relative overflow-hidden",s),...n,children:[(0,l.jsx)(i.LM,{className:"h-full w-full rounded-[inherit]",children:a}),(0,l.jsx)(o,{}),(0,l.jsx)(i.OK,{})]})});d.displayName=i.bL.displayName;let o=n.forwardRef((e,t)=>{let{className:s,orientation:a="vertical",...n}=e;return(0,l.jsx)(i.VM,{ref:t,orientation:a,className:(0,r.cn)("flex touch-none select-none transition-colors","vertical"===a&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===a&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",s),...n,children:(0,l.jsx)(i.lr,{className:"relative flex-1 rounded-full bg-border"})})});o.displayName=i.VM.displayName;let c=e=>{let{colorClass:t,label:s}=e;return(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("div",{className:(0,r.cn)("w-4 h-4 rounded",t)}),(0,l.jsx)("span",{className:"text-sm text-muted-foreground",children:s})]})};function u(e){let{questionCount:t,currentQuestionIndex:s,setCurrentQuestionIndex:n,userAnswers:i,visitedQuestions:o}=e,u=i.filter(e=>null!=e).length,m=t>0?u/t*100:0;return(0,l.jsxs)(a.Zp,{className:"shadow-lg rounded-2xl",children:[(0,l.jsxs)(a.aR,{children:[(0,l.jsx)(a.ZB,{className:"font-headline text-center",children:"Question Overview"}),(0,l.jsxs)(a.BT,{className:"text-center",children:[u," of ",t," answered (",m.toFixed(0),"%)"]})]}),(0,l.jsxs)(a.Wu,{children:[(0,l.jsxs)("div",{className:"mb-4 space-y-2",children:[(0,l.jsx)("h4",{className:"font-semibold text-sm",children:"Legend"}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,l.jsx)(c,{colorClass:"bg-destructive/20",label:"Not Visited"}),(0,l.jsx)(c,{colorClass:"bg-green-500",label:"Answered"}),(0,l.jsx)(c,{colorClass:"bg-muted",label:"Visited"}),(0,l.jsx)(c,{colorClass:"bg-orange-500",label:"Current"})]})]}),(0,l.jsx)("h4",{className:"font-semibold text-sm mb-2",children:"Questions"}),(0,l.jsx)(d,{className:(0,r.cn)(t>50?"h-64":""),children:(0,l.jsx)("div",{className:"grid grid-cols-5 sm:grid-cols-6 md:grid-cols-5 lg:grid-cols-7 gap-3",children:Array.from({length:t},(e,t)=>{let a=t===s,d=null!=i[t],c=o[t];return(0,l.jsx)("button",{onClick:()=>n(t),className:(0,r.cn)("flex items-center justify-center w-10 h-10 rounded-md font-bold transition-all duration-200",a?"bg-orange-500 text-white ring-2 ring-offset-2 ring-orange-500":d?"bg-green-500 text-white hover:bg-green-600":c?"bg-muted hover:bg-muted/80":"bg-destructive/20 text-destructive-foreground hover:bg-destructive/30"),children:t+1},t)})})})]})]})}},80129:(e,t,s)=>{"use strict";s.d(t,{E:()=>c,TestProvider:()=>o});var l=s(95155),r=s(12115),a=s(35317),n=s(56104),i=s(49072);let d=(0,r.createContext)(void 0);function o(e){let{children:t}=e,{user:s}=(0,i.A)(),[o,c]=(0,r.useState)(null),[u,m]=(0,r.useState)([]),[x,f]=(0,r.useState)(0),[h,g]=(0,r.useState)(!1),[p,b]=(0,r.useState)([]),[j,N]=(0,r.useState)(0),v=(0,r.useCallback)(async(e,t)=>{if(s&&o){let l=(0,a.H9)(n.db,"users",s.uid,"testProgress",o.id);await (0,a.BN)(l,{userId:s.uid,testId:o.id,userAnswers:e,currentQuestionIndex:t,updatedAt:new Date,completed:!1},{merge:!0})}},[s,o]),w=(0,r.useCallback)(async e=>{if(g(!0),c(e),s){let t=(0,a.H9)(n.db,"users",s.uid,"testProgress",e.id);try{let s=await (0,a.x7)(t);if(s.exists()&&!s.data().completed){let t=s.data(),l=t.userAnswers||[];m(l),f(t.currentQuestionIndex||0);let r=Array(e.questions.length).fill(!1);l.forEach((e,t)=>{null!==e&&(r[t]=!0)}),r[t.currentQuestionIndex||0]=!0,b(r)}else{let l=Array(e.questions.length).fill(null);m(l),f(0);let r=Array(e.questions.length).fill(!1);r[0]=!0,b(r),s.exists()&&s.data().completed&&await (0,a.BN)(t,{userAnswers:l,currentQuestionIndex:0,completed:!1,updatedAt:new Date},{merge:!0})}}catch(s){console.error("Error loading test progress, starting fresh:",s),m(Array(e.questions.length).fill(null)),f(0);let t=Array(e.questions.length).fill(!1);t[0]=!0,b(t)}}else{m(Array(e.questions.length).fill(null)),f(0);let t=Array(e.questions.length).fill(!1);t[0]=!0,b(t)}},[s]),y=(0,r.useCallback)(()=>{c(null),m([]),f(0),g(!1),b([]),N(0)},[]);return(0,l.jsx)(d.Provider,{value:{test:o,setTest:c,userAnswers:u,setUserAnswers:m,currentQuestionIndex:x,setCurrentQuestionIndex:f,testStarted:h,startTest:w,resetTest:y,visitedQuestions:p,setVisitedQuestions:b,saveProgress:v,testDuration:j,setTestDuration:N},children:t})}function c(){let e=(0,r.useContext)(d);if(void 0===e)throw Error("useTest must be used within a TestProvider");return e}},85057:(e,t,s)=>{"use strict";s.d(t,{J:()=>o});var l=s(95155),r=s(12115),a=s(40968),n=s(74466),i=s(59434);let d=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,l.jsx)(a.b,{ref:t,className:(0,i.cn)(d(),s),...r})});o.displayName=a.b.displayName},90010:(e,t,s)=>{"use strict";s.d(t,{$v:()=>g,EO:()=>m,Lt:()=>d,Rx:()=>p,Zr:()=>b,ck:()=>f,r7:()=>h,tv:()=>o,wd:()=>x});var l=s(95155),r=s(12115),a=s(17649),n=s(59434),i=s(30285);let d=a.bL,o=a.l9,c=a.ZL,u=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,l.jsx)(a.hJ,{className:(0,n.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...r,ref:t})});u.displayName=a.hJ.displayName;let m=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,l.jsxs)(c,{children:[(0,l.jsx)(u,{}),(0,l.jsx)(a.UC,{ref:t,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...r})]})});m.displayName=a.UC.displayName;let x=e=>{let{className:t,...s}=e;return(0,l.jsx)("div",{className:(0,n.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...s})};x.displayName="AlertDialogHeader";let f=e=>{let{className:t,...s}=e;return(0,l.jsx)("div",{className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s})};f.displayName="AlertDialogFooter";let h=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,l.jsx)(a.hE,{ref:t,className:(0,n.cn)("text-lg font-semibold",s),...r})});h.displayName=a.hE.displayName;let g=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,l.jsx)(a.VY,{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",s),...r})});g.displayName=a.VY.displayName;let p=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,l.jsx)(a.rc,{ref:t,className:(0,n.cn)((0,i.r)(),s),...r})});p.displayName=a.rc.displayName;let b=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,l.jsx)(a.ZD,{ref:t,className:(0,n.cn)((0,i.r)({variant:"outline"}),"mt-2 sm:mt-0",s),...r})});b.displayName=a.ZD.displayName},99046:(e,t,s)=>{"use strict";s.d(t,{TestClient:()=>b});var l=s(95155),r=s(12115),a=s(35695),n=s(1978),i=s(80129),d=s(30285),o=s(66695),c=s(30356),u=s(85057),m=s(24944),x=s(90010),f=s(47334),h=s(37648),g=s(965),p=s(73158);function b(e){var t,s;let{test:b}=e,j=(0,a.useRouter)(),{startTest:N,userAnswers:v,setUserAnswers:w,currentQuestionIndex:y,setCurrentQuestionIndex:C,visitedQuestions:k,setVisitedQuestions:A,saveProgress:L,setTestDuration:q}=(0,i.E)(),[E,R]=(0,r.useState)(b.timeLimitMinutes?60*b.timeLimitMinutes:0),[S,I]=(0,r.useState)(!1);(0,r.useEffect)(()=>I(!0),[]),(0,r.useEffect)(()=>{N(b)},[b,N]),(0,r.useEffect)(()=>{A(e=>{let t=[...e];return t[y]=!0,t})},[y,A]);let M=(0,r.useCallback)(()=>{L(v,y),q(b.timeLimitMinutes?60*b.timeLimitMinutes-E:E),j.push("/test-results")},[v,y,E,b.timeLimitMinutes,L,q,j]);(0,r.useEffect)(()=>{if(!S)return;let e=setInterval(()=>{b.timeLimitMinutes?R(t=>t<=1?(clearInterval(e),M(),0):t-1):R(e=>e+1)},1e3);return()=>clearInterval(e)},[S,b.timeLimitMinutes,M]);let P=(0,r.useCallback)(()=>{y<b.questions.length-1&&(L(v,y),C(y+1))},[y,b.questions.length,L,C,v]),Q=(0,r.useCallback)(()=>{y>0&&(L(v,y),C(y-1))},[y,L,C,v]);if((0,r.useEffect)(()=>{let e=e=>{"ArrowRight"===e.key?P():"ArrowLeft"===e.key&&Q()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[P,Q]),!(null==(t=b.questions)?void 0:t.length))return(0,l.jsx)("div",{children:"Loading test…"});let Z=b.questions[y];if(!Z)return(0,l.jsx)("div",{children:"Loading question…"});let B=(y+1)/b.questions.length*100,z=Math.floor(E/60),T=E%60;return(0,l.jsx)("div",{className:"container mx-auto py-10",children:(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[(0,l.jsx)("div",{className:"md:col-span-2",children:(0,l.jsxs)(o.Zp,{className:"shadow-2xl rounded-2xl",children:[(0,l.jsxs)(o.aR,{children:[(0,l.jsx)(m.k,{value:B,className:"mb-4"}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)(o.ZB,{className:"font-headline text-2xl",children:b.name}),(0,l.jsxs)("div",{className:"flex items-center space-x-2 text-lg font-semibold text-accent",children:[(0,l.jsx)(h.A,{className:"h-6 w-6"}),(0,l.jsxs)("span",{children:[String(z).padStart(2,"0"),":",String(T).padStart(2,"0")]})]})]}),(0,l.jsxs)(o.BT,{children:["Question ",y+1," of ",b.questions.length]})]}),(0,l.jsxs)(o.Wu,{children:[(0,l.jsxs)(n.P.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},transition:{duration:.3},children:[(0,l.jsx)("p",{className:"text-xl font-semibold mb-6",children:Z.text}),(0,l.jsx)(c.z,{value:null==(s=v[y])?void 0:s.toString(),onValueChange:e=>{let t=[...v];t[y]=parseInt(e,10),w(t)},className:"space-y-4",children:Z.options.map((e,t)=>(0,l.jsx)(n.P.div,{whileHover:{scale:1.02},children:(0,l.jsxs)(u.J,{htmlFor:"option-".concat(t),className:"flex items-center p-4 border rounded-lg cursor-pointer transition-all duration-200 ".concat(v[y]===t?"bg-primary/30 border-accent shadow-md":"bg-background hover:bg-primary/10"),children:[(0,l.jsx)(c.C,{value:t.toString(),id:"option-".concat(t),className:"mr-4"}),(0,l.jsx)("span",{children:e})]})},t))})]},Z.id),(0,l.jsxs)("div",{className:"mt-8 flex justify-between",children:[(0,l.jsxs)(d.$,{onClick:Q,disabled:0===y,variant:"outline",children:[(0,l.jsx)(g.A,{className:"h-4 w-4 mr-2"}),"Previous"]}),(0,l.jsxs)(d.$,{onClick:P,disabled:y===b.questions.length-1,children:["Next",(0,l.jsx)(p.A,{className:"h-4 w-4 ml-2"})]})]})]})]})}),(0,l.jsxs)("div",{className:"sticky top-24 h-fit",children:[(0,l.jsx)(f.B,{questionCount:b.questions.length,currentQuestionIndex:y,setCurrentQuestionIndex:C,userAnswers:v,visitedQuestions:k}),(0,l.jsxs)(x.Lt,{children:[(0,l.jsx)(x.tv,{asChild:!0,children:(0,l.jsx)(d.$,{className:"w-full mt-4 bg-accent text-accent-foreground hover:bg-accent/90 shadow-lg",children:"Preview & Submit Test"})}),(0,l.jsxs)(x.EO,{children:[(0,l.jsxs)(x.wd,{children:[(0,l.jsx)(x.r7,{className:"font-headline",children:"Are you sure you want to submit?"}),(0,l.jsx)(x.$v,{children:"Your test will be graded, and you won't be able to change your answers."})]}),(0,l.jsxs)(x.ck,{children:[(0,l.jsx)(x.Zr,{children:"Cancel"}),(0,l.jsx)(x.Rx,{onClick:M,className:"bg-accent text-accent-foreground hover:bg-accent/90",children:"Submit"})]})]})]})]})]})})}}},e=>{e.O(0,[992,811,635,437,147,154,540,441,964,358],()=>e(e.s=14194)),_N_E=e.O()}]);