"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[540],{30285:(e,t,r)=>{r.d(t,{$:()=>l,r:()=>d});var a=r(95155),s=r(12115),i=r(99708),n=r(74466),o=r(59434);let d=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=s.forwardRef((e,t)=>{let{className:r,variant:s,size:n,asChild:l=!1,...c}=e,u=l?i.DX:"button";return(0,a.jsx)(u,{className:(0,o.cn)(d({variant:s,size:n,className:r})),ref:t,...c})});l.displayName="Button"},49072:(e,t,r)=>{r.d(t,{AuthProvider:()=>v,A:()=>g});var a=r(95155),s=r(12115),i=r(35695),n=r(56104);r(59563);var o=r(16203),d=r(35317),l=r(90858),c=r(87481),u=r(31949),h=r(66695);function p(e){let{isApiKeyInvalid:t=!1,authConfigError:r}=e;return(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-background",children:(0,a.jsxs)(h.Zp,{className:"w-full max-w-lg mx-4 border-destructive",children:[(0,a.jsxs)(h.aR,{className:"text-center",children:[(0,a.jsx)("div",{className:"mx-auto bg-destructive/10 rounded-full p-3 w-fit",children:(0,a.jsx)(u.A,{className:"h-10 w-10 text-destructive"})}),(0,a.jsx)(h.ZB,{className:"text-destructive font-headline text-2xl mt-4",children:t?"Firebase API Key Missing":"Firebase Configuration Error"})]}),(0,a.jsxs)(h.Wu,{className:"space-y-4",children:[(0,a.jsx)("p",{className:"text-center text-muted-foreground",children:r||"The application cannot connect to Firebase because the necessary API keys are missing."}),(0,a.jsxs)("div",{className:"p-4 bg-muted/50 rounded-lg text-sm space-y-2",children:[(0,a.jsx)("h3",{className:"font-semibold text-foreground",children:"How to fix this:"}),(0,a.jsxs)("ol",{className:"list-decimal list-inside space-y-1",children:[(0,a.jsx)("li",{children:"Open your Firebase Project Console."}),t?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("li",{children:["Go to ",(0,a.jsx)("span",{className:"font-mono bg-muted px-1 py-0.5 rounded",children:"Project Settings"})," > ",(0,a.jsx)("span",{className:"font-mono bg-muted px-1 py-0.5 rounded",children:"General"}),"."]}),(0,a.jsxs)("li",{children:['In the "Your apps" section, find your web app and select ',(0,a.jsx)("span",{className:"font-mono bg-muted px-1 py-0.5 rounded",children:"Config"})," for the SDK setup."]}),(0,a.jsx)("li",{children:"Copy the configuration values (apiKey, authDomain, etc.)."}),(0,a.jsxs)("li",{children:["Paste these values into the ",(0,a.jsx)("code",{className:"font-mono bg-muted px-1 py-0.5 rounded",children:".env"})," file in your project."]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("li",{children:["Go to ",(0,a.jsx)("span",{className:"font-mono bg-muted px-1 py-0.5 rounded",children:"Authentication"})," > ",(0,a.jsx)("span",{className:"font-mono bg-muted px-1 py-0.5 rounded",children:"Sign-in method"}),"."]}),(0,a.jsx)("li",{children:"Ensure the providers you want to use (e.g., Email/Password, Google) are **Enabled**."})]})]})]}),(0,a.jsx)("p",{className:"text-center text-xs text-muted-foreground pt-2",children:"After making changes, you may need to restart the development server."})]})]})})}let f=(0,s.createContext)(void 0),m=e=>{switch(e.code){case"auth/invalid-api-key":case"auth/api-key-not-valid":return"The Firebase API Key is not valid. Please check your .env file configuration.";case"auth/invalid-credential":case"auth/wrong-password":case"auth/user-not-found":return"Invalid email or password. Please check your credentials and try again.";case"auth/invalid-email":return"Please enter a valid email address.";case"auth/user-disabled":return"This user account has been disabled.";case"auth/email-already-in-use":return"An account already exists with this email address.";case"auth/weak-password":return"The password is too weak. Please use at least 6 characters.";case"auth/requires-recent-login":return"This action is sensitive and requires recent authentication. Please log in again.";case"auth/provider-already-linked":return"This account is already linked with another provider.";case"auth/unauthorized-domain":return"This domain is not authorized for OAuth operations. Please enable it in your Firebase console.";case"auth/operation-not-allowed":case"auth/configuration-not-found":return"Firebase project configuration is incomplete. Ensure you have enabled the required Sign-in providers (Email/Password, Google, etc.) in your Firebase Console.";default:return console.error("Unhandled Auth Error:",e),"An unexpected error occurred. Please try again."}};function v(e){let{children:t}=e,[r,u]=(0,s.useState)(null),[h,v]=(0,s.useState)(!0),[g,y]=(0,s.useState)(null),x=(0,i.useRouter)(),{toast:b}=(0,c.dj)(),j=(0,s.useCallback)(()=>{let e=n.CN.apiKey;return!e||"YOUR_API_KEY_HERE"===e||"undefined"===e},[]);(0,s.useEffect)(()=>{},[]);let w=(0,s.useCallback)(async e=>{try{if(e){var t,r;let a=(0,d.H9)(n.db,"users",e.uid),s=await (0,d.x7)(a);if(s.exists()){let r=s.data();u({uid:e.uid,name:r.name,email:e.email,score:r.score||0,avatar:r.avatar||e.photoURL,createdAt:(null==(t=r.createdAt)?void 0:t.toDate())||null})}else{let t={uid:e.uid,name:e.displayName||(null==(r=e.email)?void 0:r.split("@")[0])||"New User",email:e.email,score:0,avatar:e.photoURL,createdAt:new Date};await (0,d.BN)(a,{name:t.name,email:t.email,score:0,avatar:t.avatar,createdAt:(0,d.O5)()}),u(t)}}else u(null)}catch(e){"unavailable"===e.code||e.message&&e.message.includes("offline")?b({variant:"destructive",title:"Database Connection Failed",description:"Could not connect to Firestore. Ensure Firestore is created and active in your Firebase Console."}):(console.error("Error handling user state:",e),y("An error occurred while fetching user data.")),u(null)}finally{v(!1)}},[b]);(0,s.useEffect)(()=>{if(j()){y("The Firebase API Key is missing or invalid. Please update your .env file."),v(!1);return}let e=(0,o.hg)(n.j2,w,e=>{let t=m(e);t.includes("API key")||t.includes("configuration")?y(t):(console.error("Firebase auth state error:",e),y("An unknown authentication error occurred.")),v(!1)});return()=>e()},[w,j]);let A=async e=>{if(!r)return;let t=(0,d.H9)(n.db,"users",r.uid);try{await (0,d.mZ)(t,{score:(0,d.GV)(e)}),u(t=>t?{...t,score:t.score+e}:null)}catch(e){console.error("Failed to update user score:",e),b({variant:"destructive",title:"Error",description:"Could not update your score."})}},N=async e=>{if(r&&n.j2.currentUser)try{let t=(0,l.KR)(n.IG,"avatars/".concat(r.uid,"/").concat(e.name)),a=await (0,l.D)(t,e),s=await (0,l.qk)(a.ref);await (0,o.r7)(n.j2.currentUser,{photoURL:s});let i=(0,d.H9)(n.db,"users",r.uid);await (0,d.mZ)(i,{avatar:s}),u(e=>e?{...e,avatar:s}:null),b({title:"Success!",description:"Your profile photo has been updated."})}catch(e){console.error("Error updating avatar:",e),b({variant:"destructive",title:"Upload Failed",description:"storage/unauthorized"===e.code?"Permission denied. Check your Firebase Storage security rules.":"There was an error updating your profile photo. Please try again."})}},E={user:r,loading:h,login:async(e,t)=>{if(j())return void b({variant:"destructive",title:"Configuration Error",description:"Firebase API Key is invalid. Please check your .env file."});try{await (0,o.x9)(n.j2,e,t)}catch(t){let e=m(t);e&&b({variant:"destructive",title:"Login failed",description:e})}},signup:async(e,t,r)=>{if(j())return void b({variant:"destructive",title:"Configuration Error",description:"Firebase API Key is invalid. Please check your .env file."});try{let a=await (0,o.eJ)(n.j2,e,t);await (0,o.r7)(a.user,{displayName:r})}catch(t){let e=m(t);e&&b({variant:"destructive",title:"Sign up failed",description:e})}},logout:async()=>{await (0,o.CI)(n.j2),x.push("/auth")},updateUserScore:A,updateUserAvatar:N};return g?(0,a.jsx)(f.Provider,{value:{...E,loading:!1},children:(0,a.jsx)(p,{isApiKeyInvalid:j(),authConfigError:g})}):h?(0,a.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-primary"})}):(0,a.jsx)(f.Provider,{value:E,children:t})}function g(){let e=(0,s.useContext)(f);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},56104:(e,t,r)=>{let a;r.d(t,{CN:()=>d,IG:()=>u,db:()=>c,j2:()=>l});var s=r(23915),i=r(16203),n=r(35317),o=r(90858);let d={apiKey:"AIzaSyAaJZxaeExpEgIj-ztBcwpj8oIYP5-JtaY",authDomain:"nurse-iq.firebaseapp.com",projectId:"nurse-iq",storageBucket:"nurse-iq.appspot.com",messagingSenderId:"1023611617242",appId:"1:1023611617242:web:e261b767230a31b151cae3",measurementId:r(49509).env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID};try{a=(0,s.Dk)().length?(0,s.Sx)():(0,s.Wp)(d)}catch(e){throw console.error("Firebase initialization failed",e),Error("Could not initialize Firebase. Please check your configuration.")}let l=(0,i.xI)(a),c=(0,n.aU)(a),u=(0,o.c7)(a)},59434:(e,t,r)=>{r.d(t,{K:()=>p,cn:()=>h});var a=r(52596),s=r(39688),i=r(85729),n=r(28274),o=r(45554),d=r(56191),l=r(63982),c=r(59069),u=r(45242);function h(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.QP)((0,a.$)(t))}let p={pill:i.A,heartPulse:n.A,brain:o.A,stethoscope:d.A,bookMarked:l.A,repeat:c.A,baby:u.A}},66695:(e,t,r)=>{r.d(t,{BT:()=>l,Wu:()=>c,ZB:()=>d,Zp:()=>n,aR:()=>o,wL:()=>u});var a=r(95155),s=r(12115),i=r(59434);let n=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s})});n.displayName="Card";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",r),...s})});o.displayName="CardHeader";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",r),...s})});d.displayName="CardTitle";let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",r),...s})});l.displayName="CardDescription";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",r),...s})});c.displayName="CardContent";let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",r),...s})});u.displayName="CardFooter"},87481:(e,t,r)=>{r.d(t,{dj:()=>u});var a=r(12115);let s=0,i=new Map,n=e=>{if(i.has(e))return;let t=setTimeout(()=>{i.delete(e),l({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,t)},o=[],d={toasts:[]};function l(e){d=((e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?n(r):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}})(d,e),o.forEach(e=>{e(d)})}function c(e){let{...t}=e,r=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>l({type:"DISMISS_TOAST",toastId:r});return l({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||a()}}}),{id:r,dismiss:a,update:e=>l({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function u(){let[e,t]=a.useState(d);return a.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:c,dismiss:e=>l({type:"DISMISS_TOAST",toastId:e})}}}}]);