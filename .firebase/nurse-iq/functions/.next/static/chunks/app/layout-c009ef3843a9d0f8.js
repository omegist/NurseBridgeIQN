(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{7567:(e,s,t)=>{Promise.resolve().then(t.t.bind(t,30347,23)),Promise.resolve().then(t.bind(t,36040)),Promise.resolve().then(t.bind(t,17460)),Promise.resolve().then(t.bind(t,52558)),Promise.resolve().then(t.bind(t,49072)),Promise.resolve().then(t.bind(t,74136)),Promise.resolve().then(t.bind(t,80129)),Promise.resolve().then(t.bind(t,57740))},17460:(e,s,t)=>{"use strict";t.d(s,{Header:()=>J});var a=t(95155),r=t(6874),l=t.n(r),n=t(12115),i=t(70593),d=t(25844),o=t(9133),c=t(28341),u=t(36936),m=t(68027),f=t(60794),h=t(30285),x=t(15452),p=t(74466),g=t(25318),j=t(59434);let N=x.bL,b=x.l9;x.bm;let v=x.ZL,y=n.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(x.hJ,{className:(0,j.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...r,ref:s})});y.displayName=x.hJ.displayName;let w=(0,p.F)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),k=n.forwardRef((e,s)=>{let{side:t="right",className:r,children:l,...n}=e;return(0,a.jsxs)(v,{children:[(0,a.jsx)(y,{}),(0,a.jsxs)(x.UC,{ref:s,className:(0,j.cn)(w({side:t}),r),...n,children:[l,(0,a.jsxs)(x.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,a.jsx)(g.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});k.displayName=x.UC.displayName;let A=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,j.cn)("flex flex-col space-y-2 text-center sm:text-left",s),...t})};A.displayName="SheetHeader";let C=n.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(x.hE,{ref:s,className:(0,j.cn)("text-lg font-semibold text-foreground",t),...r})});C.displayName=x.hE.displayName,n.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(x.VY,{ref:s,className:(0,j.cn)("text-sm text-muted-foreground",t),...r})}).displayName=x.VY.displayName;var P=t(49072),q=t(21596),R=t(57740),E=t(21992),L=t(73158),S=t(10518),z=t(70154);let I=E.bL,_=E.l9,Q=E.YJ;E.ZL,E.Pb,E.z6,n.forwardRef((e,s)=>{let{className:t,inset:r,children:l,...n}=e;return(0,a.jsxs)(E.ZP,{ref:s,className:(0,j.cn)("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",t),...n,children:[l,(0,a.jsx)(L.A,{className:"ml-auto"})]})}).displayName=E.ZP.displayName,n.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(E.G5,{ref:s,className:(0,j.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}).displayName=E.G5.displayName;let T=n.forwardRef((e,s)=>{let{className:t,sideOffset:r=4,...l}=e;return(0,a.jsx)(E.ZL,{children:(0,a.jsx)(E.UC,{ref:s,sideOffset:r,className:(0,j.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...l})})});T.displayName=E.UC.displayName;let H=n.forwardRef((e,s)=>{let{className:t,inset:r,...l}=e;return(0,a.jsx)(E.q7,{ref:s,className:(0,j.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",t),...l})});H.displayName=E.q7.displayName,n.forwardRef((e,s)=>{let{className:t,children:r,checked:l,...n}=e;return(0,a.jsxs)(E.H_,{ref:s,className:(0,j.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:l,...n,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(E.VF,{children:(0,a.jsx)(S.A,{className:"h-4 w-4"})})}),r]})}).displayName=E.H_.displayName,n.forwardRef((e,s)=>{let{className:t,children:r,...l}=e;return(0,a.jsxs)(E.hN,{ref:s,className:(0,j.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...l,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(E.VF,{children:(0,a.jsx)(z.A,{className:"h-2 w-2 fill-current"})})}),r]})}).displayName=E.hN.displayName;let D=n.forwardRef((e,s)=>{let{className:t,inset:r,...l}=e;return(0,a.jsx)(E.JU,{ref:s,className:(0,j.cn)("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",t),...l})});D.displayName=E.JU.displayName;let U=n.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(E.wv,{ref:s,className:(0,j.cn)("-mx-1 my-1 h-px bg-muted",t),...r})});function V(){let{setTheme:e}=(0,R.D)();return(0,a.jsxs)(I,{children:[(0,a.jsx)(_,{asChild:!0,children:(0,a.jsxs)(h.$,{variant:"ghost",size:"icon",children:[(0,a.jsx)(u.A,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),(0,a.jsx)(m.A,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),(0,a.jsx)("span",{className:"sr-only",children:"Toggle theme"})]})}),(0,a.jsxs)(T,{align:"end",children:[(0,a.jsxs)(H,{onClick:()=>e("light"),children:[(0,a.jsx)(u.A,{className:"mr-2 h-4 w-4"}),(0,a.jsx)("span",{children:"Light"})]}),(0,a.jsxs)(H,{onClick:()=>e("dark"),children:[(0,a.jsx)(m.A,{className:"mr-2 h-4 w-4"}),(0,a.jsx)("span",{children:"Dark"})]}),(0,a.jsxs)(H,{onClick:()=>e("system"),children:[(0,a.jsx)(f.A,{className:"mr-2 h-4 w-4"}),(0,a.jsx)("span",{children:"System"})]})]})]})}U.displayName=E.wv.displayName;var B=t(91394),$=t(91721),M=t(33349),F=t(35695);function O(){var e;let{user:s,logout:t}=(0,P.A)(),r=(0,F.useRouter)();return s?(0,a.jsxs)(I,{children:[(0,a.jsx)(_,{asChild:!0,children:(0,a.jsx)(h.$,{variant:"ghost",className:"relative h-8 w-8 rounded-full",children:(0,a.jsxs)(B.eu,{className:"h-9 w-9",children:[(0,a.jsx)(B.BK,{src:s.avatar||void 0,alt:s.name||"User"}),(0,a.jsx)(B.q5,{children:null==(e=s.name)?void 0:e.charAt(0).toUpperCase()})]})})}),(0,a.jsxs)(T,{className:"w-56",align:"end",forceMount:!0,children:[(0,a.jsx)(D,{className:"font-normal",children:(0,a.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium leading-none",children:s.name}),(0,a.jsx)("p",{className:"text-xs leading-none text-muted-foreground",children:s.email})]})}),(0,a.jsx)(U,{}),(0,a.jsx)(Q,{children:(0,a.jsxs)(H,{onClick:()=>r.push("/profile"),className:"cursor-pointer",children:[(0,a.jsx)($.A,{className:"mr-2 h-4 w-4"}),(0,a.jsx)("span",{children:"Profile"})]})}),(0,a.jsx)(U,{}),(0,a.jsxs)(H,{onClick:t,className:"cursor-pointer",children:[(0,a.jsx)(M.A,{className:"mr-2 h-4 w-4"}),(0,a.jsx)("span",{children:"Log out"})]})]})]}):null}function J(){let{user:e,loading:s}=(0,P.A)(),{setTheme:t}=(0,R.D)(),r=(0,F.useRouter)(),[x,p]=(0,n.useState)(!1);(0,n.useEffect)(()=>{p(!0)},[]);let g=[{href:"/tests",icon:i.A,text:"Tests"},{href:"/flashcards",icon:d.A,text:"Flashcards"},{href:"/accuracy",icon:o.A,text:"Accuracy"}];return x?(0,a.jsx)("header",{className:"sticky top-0 z-50 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:(0,a.jsxs)("div",{className:"container flex h-16 items-center",children:[(0,a.jsxs)("div",{className:"mr-4 hidden md:flex",children:[(0,a.jsxs)(l(),{href:"/",className:"mr-6 flex items-center space-x-2",children:[(0,a.jsx)(q.A,{className:"h-6 w-6"}),(0,a.jsx)("span",{className:"hidden font-bold sm:inline-block font-headline",children:"NURSE IQN"})]}),e&&(0,a.jsx)("nav",{className:"flex items-center gap-2",children:g.map(e=>{let{href:s,icon:t,text:r}=e;return(0,a.jsx)(h.$,{variant:"ghost",asChild:!0,children:(0,a.jsxs)(l(),{href:s,children:[(0,a.jsx)(t,{className:"mr-2 h-4 w-4"}),r]})},r)})})]}),(0,a.jsx)("div",{className:"md:hidden",children:e&&(0,a.jsxs)(N,{children:[(0,a.jsx)(b,{asChild:!0,children:(0,a.jsxs)(h.$,{variant:"ghost",size:"icon",children:[(0,a.jsx)(c.A,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"sr-only",children:"Open menu"})]})}),(0,a.jsxs)(k,{side:"left",children:[(0,a.jsxs)(A,{className:"border-b pb-4",children:[(0,a.jsx)(C,{className:"sr-only",children:"Menu"}),(0,a.jsxs)(l(),{href:"/",className:"flex items-center space-x-2",children:[(0,a.jsx)(q.A,{className:"h-6 w-6"}),(0,a.jsx)("span",{className:"font-bold font-headline",children:"NURSE IQN"})]})]}),(0,a.jsx)("nav",{className:"flex flex-col space-y-2 mt-4",children:g.map(e=>{let{href:s,icon:t,text:r}=e;return(0,a.jsx)(h.$,{variant:"ghost",className:"justify-start",asChild:!0,children:(0,a.jsxs)(l(),{href:s,children:[(0,a.jsx)(t,{className:"mr-2 h-4 w-4"}),r]})},r)})}),(0,a.jsxs)("div",{className:"mt-auto pt-4 border-t",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-muted-foreground px-2",children:"Theme"}),(0,a.jsxs)("div",{className:"flex flex-col space-y-1 mt-2",children:[(0,a.jsxs)(h.$,{variant:"ghost",className:"justify-start",onClick:()=>t("light"),children:[(0,a.jsx)(u.A,{className:"mr-2 h-4 w-4"}),(0,a.jsx)("span",{children:"Light"})]}),(0,a.jsxs)(h.$,{variant:"ghost",className:"justify-start",onClick:()=>t("dark"),children:[(0,a.jsx)(m.A,{className:"mr-2 h-4 w-4"}),(0,a.jsx)("span",{children:"Dark"})]}),(0,a.jsxs)(h.$,{variant:"ghost",className:"justify-start",onClick:()=>t("system"),children:[(0,a.jsx)(f.A,{className:"mr-2 h-4 w-4"}),(0,a.jsx)("span",{children:"System"})]})]})]})]})]})}),(0,a.jsxs)("div",{className:"flex flex-1 items-center justify-end space-x-2",children:[(0,a.jsx)("div",{className:"hidden md:block",children:(0,a.jsx)(V,{})}),s?(0,a.jsx)("div",{className:"h-8 w-8 rounded-full bg-muted animate-pulse"}):e?(0,a.jsx)(O,{}):(0,a.jsx)(h.$,{onClick:()=>r.push("/auth"),children:"Login"})]})]})}):(0,a.jsx)("header",{className:"sticky top-0 z-50 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:(0,a.jsx)("div",{className:"container flex h-16 items-center"})})}},21596:(e,s,t)=>{"use strict";t.d(s,{A:()=>n});var a=t(95155),r=t(1978),l=t(59434);let n=e=>{let{className:s}=e;return(0,a.jsx)(r.P.div,{className:(0,l.cn)("text-primary",s),initial:{scale:1},animate:{scale:[1,1.05,1]},transition:{duration:2,repeat:1/0,repeatType:"mirror",ease:"easeInOut"},children:(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-full w-full",children:[(0,a.jsx)("path",{d:"M22 12h-4l-3 9L9 3l-3 9H2"}),(0,a.jsx)(r.P.path,{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z",fill:"currentColor",stroke:"none",initial:{scale:1},animate:{scale:[1,1.1,1]},transition:{duration:1,repeat:1/0,ease:"easeInOut",delay:.5}})]})})}},30347:()=>{},36040:(e,s,t)=>{"use strict";t.d(s,{FloatingBubbles:()=>n});var a=t(95155),r=t(12115),l=t(35695);function n(){let[e,s]=(0,r.useState)(!1),[t,n]=(0,r.useState)(!1),i=(0,l.usePathname)();return((0,r.useEffect)(()=>{s(!0)},[]),(0,r.useEffect)(()=>{if(!e)return;if(i.startsWith("/flashcards"))return void n(!1);let s=()=>{n(!document.documentElement.classList.contains("dark"))};s();let t=new MutationObserver(s);return t.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>t.disconnect()},[i,e]),e&&t)?(0,a.jsxs)("ul",{className:"bubbles",children:[(0,a.jsx)("li",{}),(0,a.jsx)("li",{}),(0,a.jsx)("li",{}),(0,a.jsx)("li",{}),(0,a.jsx)("li",{}),(0,a.jsx)("li",{}),(0,a.jsx)("li",{}),(0,a.jsx)("li",{}),(0,a.jsx)("li",{}),(0,a.jsx)("li",{})]}):null}},52558:(e,s,t)=>{"use strict";t.d(s,{Toaster:()=>g});var a=t(95155),r=t(87481),l=t(12115),n=t(53057),i=t(74466),d=t(25318),o=t(59434);let c=n.Kq,u=l.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(n.LM,{ref:s,className:(0,o.cn)("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...r})});u.displayName=n.LM.displayName;let m=(0,i.F)("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),f=l.forwardRef((e,s)=>{let{className:t,variant:r,...l}=e;return(0,a.jsx)(n.bL,{ref:s,className:(0,o.cn)(m({variant:r}),t),...l})});f.displayName=n.bL.displayName,l.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(n.rc,{ref:s,className:(0,o.cn)("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...r})}).displayName=n.rc.displayName;let h=l.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(n.bm,{ref:s,className:(0,o.cn)("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...r,children:(0,a.jsx)(d.A,{className:"h-4 w-4"})})});h.displayName=n.bm.displayName;let x=l.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(n.hE,{ref:s,className:(0,o.cn)("text-sm font-semibold",t),...r})});x.displayName=n.hE.displayName;let p=l.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(n.VY,{ref:s,className:(0,o.cn)("text-sm opacity-90",t),...r})});function g(){let{toasts:e}=(0,r.dj)();return(0,a.jsxs)(c,{children:[e.map(function(e){let{id:s,title:t,description:r,action:l,...n}=e;return(0,a.jsxs)(f,{...n,children:[(0,a.jsxs)("div",{className:"grid gap-1",children:[t&&(0,a.jsx)(x,{children:t}),r&&(0,a.jsx)(p,{children:r})]}),l,(0,a.jsx)(h,{})]},s)}),(0,a.jsx)(u,{})]})}p.displayName=n.VY.displayName},57740:(e,s,t)=>{"use strict";t.d(s,{D:()=>i,ThemeProvider:()=>n});var a=t(95155),r=t(12115);let l=(0,r.createContext)({theme:"system",setTheme:()=>null});function n(e){let{children:s,defaultTheme:t="system",storageKey:n="nurse-iqn-theme",...i}=e,[d,o]=(0,r.useState)(t);return(0,r.useEffect)(()=>{let e=localStorage.getItem(n)||t;e&&o(e)},[n,t]),(0,r.useEffect)(()=>{let e=window.document.documentElement,s=window.document.body;e.classList.remove("light","dark"),s.classList.remove("animate-gradient-bg");let t=d;"system"===d&&(t=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),e.classList.add(t),"dark"===t&&s.classList.add("animate-gradient-bg")},[d]),(0,a.jsx)(l.Provider,{...i,value:{theme:d,setTheme:e=>{localStorage.setItem(n,e),o(e)}},children:s})}let i=()=>{let e=(0,r.useContext)(l);if(void 0===e)throw Error("useTheme must be used within a ThemeProvider");return e}},74136:(e,s,t)=>{"use strict";t.d(s,{QuizProvider:()=>o,f:()=>c});var a=t(95155),r=t(12115),l=t(35317),n=t(56104),i=t(49072);let d=(0,r.createContext)(void 0);function o(e){let{children:s}=e,{user:t}=(0,i.A)(),[o,c]=(0,r.useState)(null),[u,m]=(0,r.useState)([]),[f,h]=(0,r.useState)(0),[x,p]=(0,r.useState)(!1),[g,j]=(0,r.useState)([]),[N,b]=(0,r.useState)(0),v=(0,r.useCallback)(async(e,s)=>{if(t&&o){let a=(0,l.H9)(n.db,"users",t.uid,"quizProgress",o.id);await (0,l.BN)(a,{userId:t.uid,topicId:o.id,userAnswers:e,currentQuestionIndex:s,updatedAt:new Date,completed:!1},{merge:!0})}},[t,o]),y=(0,r.useCallback)(async e=>{if(p(!0),c(e),t){let s=(0,l.H9)(n.db,"users",t.uid,"quizProgress",e.id),a=await (0,l.x7)(s);if(a.exists()&&a.data().completed){let a=Array(e.questions.length).fill(null);await (0,l.BN)(s,{userId:t.uid,topicId:e.id,userAnswers:a,currentQuestionIndex:0,updatedAt:new Date,completed:!1},{merge:!0}),m(a),h(0);let r=Array(e.questions.length).fill(!1);r[0]=!0,j(r)}else if(a.exists()){let t=a.data(),r=t.userAnswers||[];if(r.length!==e.questions.length){let t=Array(e.questions.length).fill(null);await (0,l.BN)(s,{userAnswers:t,currentQuestionIndex:0,updatedAt:new Date,completed:!1},{merge:!0}),m(t),h(0);let a=Array(e.questions.length).fill(!1);a[0]=!0,j(a)}else{m(r),h(t.currentQuestionIndex||0);let s=Array(e.questions.length).fill(!1);r.forEach((e,t)=>{null!==e&&(s[t]=!0)}),s[t.currentQuestionIndex||0]=!0,j(s)}}else{m(Array(e.questions.length).fill(null)),h(0);let s=Array(e.questions.length).fill(!1);s[0]=!0,j(s)}}else{m(Array(e.questions.length).fill(null)),h(0);let s=Array(e.questions.length).fill(!1);s[0]=!0,j(s)}},[t]),w=(0,r.useCallback)(()=>{c(null),m([]),h(0),p(!1),j([]),b(0)},[]);return(0,a.jsx)(d.Provider,{value:{topic:o,setTopic:c,userAnswers:u,setUserAnswers:m,currentQuestionIndex:f,setCurrentQuestionIndex:h,quizStarted:x,startQuiz:y,resetQuiz:w,visitedQuestions:g,setVisitedQuestions:j,saveProgress:v,quizDuration:N,setQuizDuration:b},children:s})}function c(){let e=(0,r.useContext)(d);if(void 0===e)throw Error("useQuiz must be used within a QuizProvider");return e}},80129:(e,s,t)=>{"use strict";t.d(s,{E:()=>c,TestProvider:()=>o});var a=t(95155),r=t(12115),l=t(35317),n=t(56104),i=t(49072);let d=(0,r.createContext)(void 0);function o(e){let{children:s}=e,{user:t}=(0,i.A)(),[o,c]=(0,r.useState)(null),[u,m]=(0,r.useState)([]),[f,h]=(0,r.useState)(0),[x,p]=(0,r.useState)(!1),[g,j]=(0,r.useState)([]),[N,b]=(0,r.useState)(0),v=(0,r.useCallback)(async(e,s)=>{if(t&&o){let a=(0,l.H9)(n.db,"users",t.uid,"testProgress",o.id);await (0,l.BN)(a,{userId:t.uid,testId:o.id,userAnswers:e,currentQuestionIndex:s,updatedAt:new Date,completed:!1},{merge:!0})}},[t,o]),y=(0,r.useCallback)(async e=>{if(p(!0),c(e),t){let s=(0,l.H9)(n.db,"users",t.uid,"testProgress",e.id);try{let t=await (0,l.x7)(s);if(t.exists()&&!t.data().completed){let s=t.data(),a=s.userAnswers||[];m(a),h(s.currentQuestionIndex||0);let r=Array(e.questions.length).fill(!1);a.forEach((e,s)=>{null!==e&&(r[s]=!0)}),r[s.currentQuestionIndex||0]=!0,j(r)}else{let a=Array(e.questions.length).fill(null);m(a),h(0);let r=Array(e.questions.length).fill(!1);r[0]=!0,j(r),t.exists()&&t.data().completed&&await (0,l.BN)(s,{userAnswers:a,currentQuestionIndex:0,completed:!1,updatedAt:new Date},{merge:!0})}}catch(t){console.error("Error loading test progress, starting fresh:",t),m(Array(e.questions.length).fill(null)),h(0);let s=Array(e.questions.length).fill(!1);s[0]=!0,j(s)}}else{m(Array(e.questions.length).fill(null)),h(0);let s=Array(e.questions.length).fill(!1);s[0]=!0,j(s)}},[t]),w=(0,r.useCallback)(()=>{c(null),m([]),h(0),p(!1),j([]),b(0)},[]);return(0,a.jsx)(d.Provider,{value:{test:o,setTest:c,userAnswers:u,setUserAnswers:m,currentQuestionIndex:f,setCurrentQuestionIndex:h,testStarted:x,startTest:y,resetTest:w,visitedQuestions:g,setVisitedQuestions:j,saveProgress:v,testDuration:N,setTestDuration:b},children:s})}function c(){let e=(0,r.useContext)(d);if(void 0===e)throw Error("useTest must be used within a TestProvider");return e}},91394:(e,s,t)=>{"use strict";t.d(s,{BK:()=>d,eu:()=>i,q5:()=>o});var a=t(95155),r=t(12115),l=t(54011),n=t(59434);let i=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.bL,{ref:s,className:(0,n.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...r})});i.displayName=l.bL.displayName;let d=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l._V,{ref:s,className:(0,n.cn)("aspect-square h-full w-full",t),...r})});d.displayName=l._V.displayName;let o=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.H4,{ref:s,className:(0,n.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...r})});o.displayName=l.H4.displayName}},e=>{e.O(0,[309,992,811,635,437,874,147,335,540,441,964,358],()=>e(e.s=7567)),_N_E=e.O()}]);